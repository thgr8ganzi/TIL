## 컨슈머

### 컨슈머 소개

* 프로듀서가 전송한 데이터는 카프카 브로커에 적재된다.
* 컨슈머는 적재된 데이터를 사용하기 위해 브로커로부터 데이터를 가져와서 필요한 처리를 한다.
* 마케팅 문자를고객에게 보내는 기능이 있다면 컨슈머는 토픽으로 부터 고객 데이터를 가져와서 문자 발송처리를 한다.

### 컨슈머 내부구조

* Fetcher : 리더 파티션으로 부터 레코드 들을 미리 가져와서 대기
* poll() : Fetcher 에 있는 레코드들을 리턴하는 레코드
* ConsumerRecord : 토픽, 파티션, 오프셋, 키, 값, 타임스탬프 정보를 가지고 있는 객체
* 처리를 완료한 레코드는 커밋을 해서 브로커에게 처리 완료를 알린다.

### 컨슈머 그룹

* 컨슈머 그룹으로 운영하는 방법은 컨슈머를 각 컨슈머 그룹으로부터 격리된 환경에서 안전하게 운영할수 있도록 도와주는 방식
* 컨슈머 그룹으로 묶인 컨슈머는 토픽 1개 이상 파티션에 할당되어 데이터를 가져간다.
* 컨슈모 그룹으로 묶인 컨슈머가 토픽을 구독해서 데이터를 가져갈때 1개 파티션은 최대 1개의 컨슈머에 할당 가능
* 1개 컨슈머는 여러개의 파티션에 할당 될수 있다.
* 컨슈머 그룹의 컨슈머 개수는 가져가고자 하는 토픽의 파티션 개수보다 같거나 작다

### 