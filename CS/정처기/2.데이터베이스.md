## 데이터베이스 구축

### 데이터베이스 개념

* 데이터와 정보
  * 데이터 : 관찰이나 측정을 통해 수집한 사실이나 값
  * 정보 : 데이터를 처리하여 의시 결정에 유용하게 정리한 결과물
* 데이터 베이스
  * 특정 조직에 업무에 필요한 데이터들 집합
* 정의
  * 통합 데이터 : : 중복이 최소화된 데이터
  * 저장 데이터 : 컴퓨터가 접근할 수 있는 저장 매체에 저장된 데이터
  * 운영 데이터 : 조직의 업무를 수행하는데 있어서 존재 가치가 있는 데이터
  * 공용 데이터 : 여러 응용 시스템들이 공동으로 소유하고 유지하는 데이터
* 특징
  * 실시간 접근성
  * 계속적인 변화
  * 동시 공유
  * 내용에 의한 참조
  * 데이터의 독립성
* 생명주기
  * 분석 - 설계 - 구현 - 운영 - 감시 및 개선
* 데이터 언어
  * DDL(Data Definition Language) : 데이터 정의 언어
  * DML(Data Manipulation Language) : 데이터 조작 언어
  * DCL(Data Control Language) : 데이터 제어 언어
* 스키마
  * 정의
    * 데이터베이스의 구조, 제약 조건, 속성, 개체, 관계를 포함한 전반적인 명세
  * 3계층 스키마
    * 외부 스키마
      * 사용자나 응용 프로그램의 관점에서 데이터 베이스의 논리적 구조정의
      * 서브 스키마라고 불리며 하나의 데이터베이스에 여러개의 외부스키마가 존재
      * 여러 응용 프로그램이나 사용자가 하나의 외부 스키마를 공유할수 있다
    * 개념 스키마
      * 데이터베이스의 전체적인 논리적 구조를 나타내며 전체 조직의 데이터 요구사항을 종합적으로 반영
      * 하나의 개념 스키마만 존재
      * 스키마는 주로 개념 스키마
      * 데이터 접근 권한, 보안 정책, 무결성 규칙등의 명세 포함
    * 내부 스키마
      * 물리적 저장장치 관점에서 데이터 베이스의 구조 정의
      * 실제로 데이터가 어떻게 저장 장치에 배열되고 저장되는지, 레코드의 물리적 구조, 표현 방식, 순서등을 명세
    * 데이터 독립성
      * 논리적 독립성
        * 응용 프로그램에 영향을 주지 않고 데이터 베이스 논리적 구조를 변경할수 있는 능력
        * 개념 스키마가 변경되어도 외부 스키마에는 영향을 미치지 않도록 지원
      * 물리적 독립성
        * 응용 프로그램이나 데이터 베이스의 논리적 구조의 영향을 미치지 않고 데이터의 물리적 구조를 변경할수 있는 능력
        * 내부 스키마가 변경되어도 외부/개념 스키마가 영향을 받지 않도록 지원

--------------------------------------------

### 데이터베이스 관리 시스템(DBMS)

* 개념
  * 데이터베이스를 효과적으로 관리하고 조작하기 위한 전용 소프트웨어
* 기능
  * 데이터 정의
  * 데이터 조작
  * 데이터 제어
  * 데이터 공유
  * 데이터 보호
  * 데이터 구축
  * 유지보수
* 장점
  * 중복된 데이터 최소화
  * 데이터 독립성 확보
  * 동시 데이터 접근 및 공유 가능
  * 강화된 데이터 보안
  * 데이터 뮤결성 유지
  * 시스템 장애 발생시 복구 기능
* 단점
  * 비용 부담
  * 복잡한 백업 및 복구 절차
* 종류
  * 계층형
    * 트리구조로데이터간의 관계를 표현하며 세그먼트 단위로 데이터 관리
    * 다대다 관계 처리 불가
  * 네트워크형
    * 계층형의 단점을 보완 대다다 가능
    * 구조 복잡
    * CODASYL 표준
  * 관계형
    * 키, 값 으로 이루어진 데이터를 행과 열로 구성된 테이블 구조로 단순화
    * SQL 사용
  * 객체지향형
    * 객체지향 프로그래밍의 개념을 데이터베이스에 적용
    * 비정형 데이터를 데이터 베이스화
  * 객체 관계형
    * 객체지향형과 관계형 데이터베이스의 장점을 결합
  * NoSQL
    * Not Only SQL
    * 비정형 데이터 처리에 유리 스키마 변경이 블가능해 데이터 값에 문제가 발생하면 감지 어려움
  * New SQL
    * NoSQL의 확장된 개념으로 RDBMS 와 장점과 NoSQL의 장점을 결합

--------------------------------------------

## 데이터 베이스 설계

### 데이터베이스 설계

* 정의
  * 데이터베이스 설계는 요구 조건에서부터 데이터 베이스 구조를 도출하는 과정
* 목적
  * 이해관계자의 데이터 관점에서의 요구사항에 대한 정확한 이해와 추상화
* 고려사항
  * 제약조건 : 저장된 데이터 값이 만족해야할 주어진 조건
  * 데이터베이스 무결성 : 데이터 삽입, 삭제, 갱신 후 데이터값은 제약조건 만족
  * 일관성 : 저장된 데이터 값 또는 특정 질의에 대한 응답은 모순없이 일치
  * 회복 : 시스템 장애 발생시 데이터베이스를 복구
  * 보안 : 불법적인 접근으로부터 데이터 보호
  * 효율성 : 데이터베이스 시스템의 성능을 향상
  * 확장성 : 시스템에 영향을 주지 않고 시스템 확장

### 데이터 베이스 설계 단계

* 요구조건 분석
  * 데이터 베이스의 사용자, 사용 목적, 사용범위, 제약 조건등을 정리하여 명세서 작성
* 개념적 설계
  * 현실 세계의 요구사항과 데이터를 추상적인 관점에서 표현하느 단계
  * DBMS 에 독립적으로 데이터 베이스 설계 진행
  * ERD(Entity Relationship Diagram) 작성
* 논리적 설계
  * 자료를 컴퓨터가 설계할수 있도록 목표 DBMS에 맞게 변환
  * ERD를 통해 테이블로 변환
  * 정규화
* 물리적 설계
  * 특정 DBMS 의 물리적 구조, 저장 구조, 데이터 타입의 특징, 인덱스등 고려하여 설계
  * 레코드의 집중 및 분석 오브젝트와 접근 방법의 결정, 트랜잭션 분석, 인덱스설정, 뷰 설정, 데이터베이스 용량계획등 수행
* 구현
  * DDL 문을 사용하여 명령문을 작성 컴파일, 실행하여 데이터베이스 생성

--------------------------------------------

## 데이터 모델링

### 데이터 모델

* 개념
    * 현실 세계의 복잡한 데이터 구조를 단순화
* 종류
    * 계층형 모델
    * 네트워크 형 모델
    * 관계형 모델
    * 객체지향 형 모델
* 구분
    * 개념적
    * 논리적
    * 물리적
* 구조
    * 개체 : 저장할만한 가치가 있는 현실 세계의 대상체
    * 개체타입 : 개체를 구성하는 속성들의 집합
    * 개체 인스턴스 : 구체적인 개체
    * 개체 세트 : 개체 인스턴스들의 집합
    * 속성 : 개체의 고유한 특성
    * 관계 : 개체와 개체간의 연관성
    * 구조 : 데이터 구조및 개체관 관계
    * 연산 : 데이터 처리 방법
    * 제약 조건
    * 데이터의 논리적 제약 조건

### 개체 관계 모델(Entity Relationship Model)

* 개념
    * 데이터 베이스의 요구사항을 그래픽적으로 표현
    * 피터첸에 의해 제안
    * 산출물 : ERD(Entity Relationship Diagram)
* 개체
    * 현실 세계의 독립적이고 구별 가능한 대상
    * ERD 에서는 사각형
* 속성
    * 애틀리뷰트
    * 개체나 관계의 공유한 특성을 나타내는 정보의 단위
    * DRD 에서는 원으로 표현 키는 밑줄 다중값은 구대의 원 유도 속성은 원을 점선
    * 속성 유형
        * 단일값 속성 : 하나의 값만 속성
        * 다중값 속성 : 여러값을 갖는 속성
        * 단순 속성 : 더이상 분해할수 없는 속성
        * 복합 속성 : 분해 가능한 속성
        * 유도 속성 : 다른 속성에서 유도되는 속성
        * 널 속성 : 값이 아직 결정되지 않거나 존재하지 않는 속성
        * 키 속성 : 개체를 구별하기 위한 속성
* 관계
    * 두 개체간 의미있는 연결
    * ERD 에서는 마름모
    * 대응 종류
        * 1 : 1
        * 1 : N
        * M : N

### 데이터모델 품질 기준

* 정확성
* 완전성
* 준거성
* 최신성
* 일관성
* 활용성

-----------------------------------------------

## 논리 데이터베이스 설계

### 논리적 모델링

* 개념
    * 개념적 설계 단계에서 도출된 개체, 속성, 관계를 구족적으로 표현
    * 정규화
    * 특정 DBMS에 종속적이지 않은 데이터 모델링
* 종류
    * 관계형
    * 계층형
    * 네트워크
    * 객체지향

### 정규화

* 개념
    * RDB 의 설계에서 데이터 중복을 최소화 하기 위한 과정
    * 중복 데이터를 허용하지 않아 무결성 유지와 저장 용령 절감
* 목적
    * 데이터 중복 최소화
    * 정보의 무손실
* 장점
    * 중복 데이터 최소화
    * 저장 공간 효율적 활용
    * 이상 현상 제거
* 단점
    * 처리 복잡성 증가
    * 실행 속도 저하
    * 참조 무결성 유지에 추가 노력 필요
* 이상현상
    * 데이터 중복으로 인해 릴레이션 조작시 발생하는 예기치 않은 문제점
* 종류
    * 삽입 이상 : 데이터를 삽일할때 불필요한 데이터가 함께 삽입된느 현상
    * 삭제 이상 : 튜플을 삭제할때 연쇄 삭제 현상으로 인해 정보 손실
    * 갱신 이상 : 튜플의 속성값을 갱신 할때 일부 튜플의 정보만 갱신되어 정보에 모순이 생기는 현상
* 함수적 종속
    * 어떤 릴레이션 R의 X와 Y를 각각 속성의 부분 집합이라고 가정했을때
    * X의 값을 알면 Y의 값을 바로 식별할수있고 X의 값에 Y 값이 달라질때 Y는 X에 함수적 종속
    * x -> y
    * 완전 함수적 종속 : 종속자가 기본키에만 종속되며, 기본키가 여러 속성으로 구성되어 있을때 기본키를 구성하는 모든 속성이 포함된 기본키의 부분 집합에 종속된 경우
    * 부분 함수적 종속 : 기본키가 여러 속성으로 구성되어 있을때 기본키를 구성하는 속성중 일부만 종속되는 경우
    * 이행적 함수 종속 : X -> Y, Y -> Z 일때 X -> Z 가 성립되는 경우
    * 정규화 과정 : 비정규 릴레이션 -> 1NF -> 2NF -> 3NF -> BCNF -> 4NF -> 5NF
* 정규화 과정
    * 1NF : 릴레이션의 모든 속성이 원자값을 갖도록 분해
    * 2NF : 1NF 이면서 기본키가 아닌 속성이 기본키에 완전 함수적 종속
    * 3NF : 2NF 이면서 기본키가 아닌 속성이 기본키에 이행적 함수적 종속이 아닌 경우
    * BCNF : 3NF 이면서 모든 결정자중 후보키가 아닌것들 제거
    * 4NF : 다치 종속을 제거
    * 5NF : 조인 종속을 제거

-----------------------------------------------

## 물리 데이터베이스 설계

### 물리 데이터 베이스 설계

* 과정
    * 사용자 DBMS 결정
    * 데이터 타입 결정
    * 역정규화
* 특징
    * 논리적 설계를 물리적인 데이터 모델로 매핑
* 고려사항
    * 무결성
    * 일관성
    * 회복성
    * 보안
    * 효율성
    * 확장성
* 논리-물리 데이터 모델 변환
    * Entitiy 를 table 로 변환
    * 속성을 컬럼으로 변환

### 반정규화

* 개념
    * 데이터 베이스 설계에서 정규화를 거친후 성능향상이나 개발 및 운영의 편의성을 위해 의도적으로 중복을 허용하거나 데이터를 재구성 하는 기법
* 고려사항
    * 데이터 중복으로 인해 데이터 무결성이 손상될 위험이 있다
    * 읽기 작업은 빨라지지만 삽입, 삭제, 수정은 느려질수 있다.
* 적용순서
    * 반정규화 대상 조사
    * 다른 방법 유도
    * 반정규화 수행
* 유형
    * 테이블 분할
        * 수평 분할
        * 수직 분할
    * 테이블 중복
        * 통계 테이블 추가
        * 진행 테이블 추가
    * 컬럼기반 분할
        * 조회 빈도 기반
        * 크기 기반 분할
    * 컬럼 중복
        * 중복 컬럼 추가
        * 파생 컬럼 추가

### 테이블 저장 사이징

* 분석
    * 정확한 데이터 용량을 산정하여 디스크 사용의 효율을 높임
* 테이블 사이징
    * 초기 크기 계산
    * 확장 크기 계산
    * 테이블 용량 계싼
    * 이ㄴ덱스 용량 계산

### 데이터 베이스 이중화

* 이중화 구성
    * 장애에 대비하여 동일한 데이터 베이스를 중복하여 관리하는 방식
    * 고가용성을 위한 정보 시스템의 지속적인 정상 운영을 목표로 함
* 목적
    * 장애나 재해 발생시 빠른 서비스 재개
* 분류
    * Eager : 트랜잭션 발생시 즉시 모든 이중화 서버에 반영
    * Lazy : 트랜잭션 완료후 변경 사항을 트랜잭션 형태로 각 노드에 전달
* 종류
    * Active - Active : 모든 다중화된 장비가 활성화
    * Active - Standby : 하나의 장비만 활성화

### 데이터베이스 백업

* 개념
    * 중단 사태에 대비하여 데이터를 주기적으로 복사하여 보관
* 백업 방식
    * 전체 백업 : 저장된 폴더의 모든 데이터 백업
    * 증분 백업 : 최근 전체 백업 이후 변경/추가된 데이터만 백업
    * 차등 백업 : 최근 전체 백업 이후 모든 변경/추가된 데이터를 백업
    * 실시간 백업 : 데이터 변경시 즉시 백업
    * 트랜잭션 로그 백업 : 실행된 SQL 문을 기록한 로그, REDO 및 UNDO 작업을 통해 데이터 베이스 복원
    * 합성 백업 : 기존의 전체 백업과 여러개의 증분 백업으로 전체 백업 만듬
* 복구 시간 목표/복구 시점 목표
    * 복국 시간 목표(RTO)
        * 서비스가 중단된후 서비스를 다시 복원할때 까지 허용되는 최대 시간
    * 복구 시점 목표(RPO)
        * 마지막 백업 이후 허용되는 최대 데이터 손실 시간

### 암호화

* 개념
    * 데이터베이스 내뇽을 암호화 하는 과정
* 필요성
    * 데이터 가치 증가
* 암호화 방식
    * API 방식 : 애플리케이션에서 데이터의 암/복호화 수행
    * Plug-in 방식 : DB 서버에 제품 설치후 암/복호화 수행
    * TDE(Transparent Data Encryption) : DBMS 에서 제공하는 암/복호화 기능을 활용
    * 파일 암호화
    * 하드웨어 방식
* 국가정보원 권고사항
    * 안전한 알고리즘
    * 암호 키 관리
    * 데이터 암/복호화
    * 접근 통제
    * 암호 통신
    * 식별 및 인증
    * 보안 감사
    * 보안 관리

-----------------------------------------------

## 데이터베이스 물리 속성 설계

### 파티셔닝

* 파티셔닝
    * 데이터베이스의 특정 부분을 여러 섹션으로 분할
    * 대용량 데이터의 조회속도 향상 관리 용이성 성능 및 가용성 향상을 위해 사용
* 샤딩
    * 거대한 데이터 베이스나 시스템을 작은 조각으로 나누어 분산 저장 및 관리 기법
    * 데이터의 크기가 매우 클때 효과적
    * 샤드는 나눠진 데이터 블록의 구간을 의미
* 파티셔닝 장점
    * 데이터 가용성 향상
* 파티셔닝 단점
    * 테이블간 조인 비용증가
* 종류
    * 수평분할
        * 테이블의 행을 기준으로 분할
        * 스키마를 복제후 샤드키를 기준으로 데이터를 나눔
    * 수직분할
        * 테이블의 컬럼을 기준으로 분할
        * 자주 사용하는 컬럼을 분리
        * 하나의 테이블을 2개 이상으로 분할
* 분할기분
    * 범위 분할
        * 파티션 키의 연속된 범위로 정의
    * 목록 분할
        * 특정 파티션에 저장될 데이터에 대한 명시적 제어
    * 해시 분할
        * 파티션 키 값에 해시 함수를 적용하고 거기서 반환된 값으로 파티션 매핑
        * 병렬 처리시 성능 효과 극대화
    * 라운도 로빈 분할
        * 데이터를 균일하게 분배해서 저장
    * 합성 분할
        * 위기술들 복합적 사용

### 클러스터

* 개념
    * 자주 사용되는 테이블의 데이터를 디스크 상 동일한 위치에 저장하여 데이터 액세스 효율을 향상 시키는 물리적 저장방법
* 특징
    * 그룹화된 데이터는 같은 데이터 블록에 저장되어 디스크 I/O 횟수를 줄임
* 대상 테이블
    * 데이터 분포도가 넓은 테이블

### 인덱스

* 개념
    * 특정 데이터베이스 테이블 검색 속도 향상을 위한 저장 공간 활용 자료 구조
* 사용 이유
    * 대규모 테이블에서 빠른 데이터 추출
* 종류
    * 클러스 인덱스
        * 테이블당 1개면 허용 해당 컬럼을 기준으로 테이블이 물리적 정렬
        * 데이터는 기본적으로 오름 차순으로 정렬
    * 논 클러스터 인덱스
        * 테이블당 약 240개의 인덱스 생성 가능
        * 레코드의 원본은 정렬디지 않고 인덱스 페이지만 정렬
    * 밀집 인덱스
        * 데이터 레코드 각각ㅇ 대해 하나의 인덱스가 만들어짐
    * 희소 인덱스
        * 레코드 그룹 또는 데이터 블록에 대해 하나의 인덱스 만들어짐
* 인덱스 구조
    * 트리 기반 인덱스
    * 비트맵 인덱스
    * 함수 기반 인덱스
    * 비트맵 조인 인덱스
    * 도메인 인덱스
* 컬럼 선정
    * 분포도가 좋은 컬럼
    * 자주 조합되어 사용되는 경우
    * 가능한 수정이 빈번하지 않은 컬럼
    * 한 컬럼이 여러 인덱스 포함되지 않도록
    * 기본키 및 외부키가 되는 컬럼
* 고려사항
    * 새로 추가된 인덱스는 기존 엑세스 경로에 영향 미칠수 있다
    * 지나치게 많은 인덱스는 오버헤드 발생
    * 넓은 범위 인덱스로 처리시 많은 오버헤드 발생
    * 옵티마이저를 위한 통계데이터 주기적 갱신

### 뷰

* 개념
    * 기본 테이블에서 유도된 이름이 있는 가상테이블
    * 실제 데이터를 저장하지 않고 논리적으로만 존재
    * 사용자는 실제 테이블과 같이 뷰를 조작 가능
* 특징
    * 기본 테이블 유도로 기본 테이블과 유사항 형태와 조작을 갖는다
    * 물리적 구현이 없는 가상 테이블
    * 기본테이블/ 뷰 삭제시 관련 뷰도 자동 삭제
* 장점
    * 논리적 데이터 독립성
    * 자동 보안
* 단점
    * 독립적 인덱스 부재
    * 뷰 조작에 제약(삽입, 삭제, 갱신)

### 시스템 카탈로그

* 개념
    * 데이터 베이스의 모든 데이터 개체들에 대한 정보를 저장한 시스템 테이블, 데이터 사전 이라고 한다
    * DDL의 결과로 생성되는 데이터 베이스 구조와 관련 통계 정보 저장
    * 메타 데이터
* 내용
    * 릴레이션
    * 인덱스
    * 뷰
    * 통계
    * 사용자
* 특징
    * 시스템 카탈로그 자체도 시스템 테이블로 구성
    * 사용자는 SQL 을 사용하여 내용 조회
    * DBMS 에 의해 생성
    * 사용자는 시스템 카탈로그 직접 갱신 X

-----------------------------------------------

## 관계 데이터베이스 모델

### 관계 데이터 모델

* 개념
    * 데이터의 논리적 구조를 테이블 형태로 표현
    * 각테이블은 튜플과 속성 으로 구성
* 구조
    * 속성
        * 릴레이션의 열을 속성
        * 개체의 특성 기술
        * 속성의 개수는 릴레이션의 차수
    * 튜플
        * 행을 튜플이라고 하며 속성들의 모임
        * 튜플의 수는 릴레이션의 카디널리티
    * 도메인
        * 속성이 가질수 있는 값의 범위
        * 도메인을 정의하면 무결성을 유지할수 있다
    * 차수
        * 릴레이션의 속성의 총개수
    * 카디널리티
        * 릴레이션에서 튜플의 총개수
* 릴레이션
    * 데이터들을 2차원 테이블의 구조로 저장
    * 구성
        * 릴레이션 스키마
        * 릴레이션 인스턴스
    * 특징
        * 튜플의 유일성
        * 튜플의 무순서성
        * 속성의 무순서성
        * 속성의 원자성
        * 동적 변화성

### 관계 데이터 언어(관계대수, 관계 해석)

* 관계 대수 개념
    * 관계 대수는 원하는 데이터를 찾기 위한 절차적 언어
    * 데이터를 어떻게 찾아야 하는지 처리 과정을 명시
* 순수 관계 연산자
    * SELECT
        * 주어진 조건을 만족하는 튜플
        * 시그마
    * PROJECT
        * 속성 리스트에 주어진 속성값만 추출
        * 파이
    * JOIN
        * 두 릴레이션에서 연관된 튜플을 결함
        * 보타이
    * DIVISION
        * 릴레이션 S 의 모든 튜플과 관련이 있는 릴레이션 R의 튜플들을 반환
        * 나누기
* 일반 집합 연산자
    * 합집합
        * 두 릴레이션의 튜플 합집합을 구하며 중복 튜플 제거
        * U
    * 교집합
        * 두 릴레이션의 공통 튜플을 구함
        * n
    * 차집합
        * 두 릴레이션의 차집합을 구함
        * -
    * 교차곱
        * 두 릴레이션의 모든 튜플의 조합을 구함
        * X
* 관계 해석
    * 관계 데이터 모델의 제안자인 코드가 수합의 술어 해석에 기반을 두고 관계 데이터베이스를 위해 제안
    * 계산 수식을 사용하여 원하는정보 정의
    * 원하는 정보가 무엇이라는것만 정의한는 비 절차적 특성

-----------------------------------------------

## 키와 무결성 제약 조건

### 속성

* 개념
    * 릴레이션에서 정보의 최소 단위로 각열을 통해 데이터의 상태나 특성 나타냄
    * 컬럼을 속성이라고 한다.
* 특징
    * 업무프로세스에 필요한 정보로 구성
    * 하나의 속성에는 하나의 값만
    * 여러값이 필요한 경우 테이블로 분리
* 분류
    * 기본속성 : 업무로 부터 추출한 모든 속성
    * 설계속성 : 코드성 데이터, 릴레이션 식별용 일련번호
    * 파생 속성 : 다른 속성에 영향을 받아 발생하는 속성
* 세부 의미에 따른 분류
    * 단순속성
    * 복합속성
* 구성 방식에 따른 분류
    * PK
        * 릴레이션에서 튜플을 유일하게 구분할수 있는 속성
    * FK
        * 다른 릴레이션과의 관계에서 참조하고 있는 속성
    * 일반속성
        * 릴레이션에 포함된 속성중 PK 와 FK 가 아닌 속성
* 도메인
    * 속성의 값 범위를 정의
    * 속성이 가질수 있는 가능한 모든값의 집합
* 부여원칙
    * 업무에서 사용하는 이름
    * 서술식 보다 간결한 이름
    * 약어 사용 자제

### 키

* 개념
    * 데이터 베이스에서 튜플을 식별하고 구별하는데 사용되는 컬럼
* 종류
    * 후보키(유일성)
      * 릴레이션에서 튜플을 유일하게 식별할수 있는 속성
      * 반드시 하나 이상 존재해야 하며 유일성과 최소성 만족
    * 기본키
      * 후보키중 선택한 주키
      * 특정 튜플을 유일하게 식별할수 있으며 NULL 값을 가질수 없고 중복된 값을 가질수 없다
    * 대체키
      * 둘이상 후보키가 있을때 기본키로 선택되지 않은 나머지키
    * 슈퍼키(최소성)
      * 튜플을 유일하게 식별할수 있는 속성들의집합 최소성 만족시키지 않음
    * 외래키
      * 다른 릴레이션의 기본키를 참조

### 무결성

* 개념
  * 데이터의 정확성, 일관성 및 유효성을 보장하는 데이터 베이스 관리 스스템의 중요기능
* 개체 무결성
  * 모든 릴레이션은 중복되지 않는 고유한 기본키 가짐
  * NULL 불가
* 참조 무결성
  * 외래키는 NULL 이거나 유효한 릴레이션 기본키와 일치
  * 제약 조건
    * 제약 : 연산 거부
    * 연쇄 : 참조 튜플 삭제시 연쇄 삭제
    * NULL : 참조값 삭제시 튜플 외래키를 NULL 로 설정
    * 기본값 : NULL 대신 기본값 등록
* 도메인 뮤결성
  * 모든 속성값은 정의된 도메인에 속해야 한다
* 고유 무결성
  * 릴레이션의 특정속성은 서로 달라야함
* 키 무결성
  * 각 렐리이션은 적어도 하나의 키를 가짐
* 릴레이션 무결성
  * 삽입, 삭제, 갱신 등의 연산은 릴레이션의 무결성을 해치지 않음

-----------------------------------------------

## 물리데이터 모델 품질 검토

### CRUD 분석

* 개념
  * Create, Read, Update, Delete 를 묶은말
  * 시스템 구축시 프로세스와 dB에 저장되는 데이터 사이의 의존관계 표현
  * 시스템을 구축하기 위해 해당 업무에 어떤 데이터가 존재하는지 무엇이 영향을 받는지 분석
* 필요성
  * 모델링 작업 검증
  * 중요산출물
  * 테스트시 사용
  * 인터페이스 현황 파악

### 옵티마이저

* SQL 처리흐름
  * SQL 입력 -> 구문 분석 -> 실행 -> 인출
  * 구문분석
    * 사용자가 제풀한 SQL 문이 데이터 베이스에 이미 사용된적이 있는지 확인
    * 이미 처리된적이 있다면 구문분석 단계를 건너뛰고 캐시된 실행계획을 재사용
    * SQL 문법의 정확성, SQL 문내의 테이블과 뷰가 실제로 데이터 베이스에 존재하는지 확인
  * 실행
    * SQL 문에서 참조된 데이터가 데이터 버퍼 캐시 영역에 있는지 검사
    * 데이터 버퍼 캐시는 자주 접근하는 데이터를 메모리에 저장하여 빠른 접근을 가능하게 함
    * 데이터가 캐시에 존재한다면 디스크에서 데이터를 읽지 않고 캐시에서 바로 데이터 추출
    * 데이터가 캐시에 없다면 데스크에서 데이터를 읽어 캐시에 로드하고 처리
  * 추출
    * 실행단계가 완료 되면 서버 프로세스는데이터는 데이터 버퍼 캐시 영역에서 관련 데이터를 읽어 사용자에게 전달
    * SELECT 문을 실행하는 경우에만 추출 단계가 실행되고 UPDATE, INSERT, DELETE 실행시 추출단계는 실행 안됨
* 개념
  * 옵티마이저는 SQL 문에 대한 최적의 실행 방법 결정
* 구분
  * 규칙 기반 옵티마이저
    * 규칙(우선순위) 가지고 실행 계획을 생성
    * 인덱스 유무, 연산자, 객체등을 참조 하여 우선순위 부여
  * 비용기반 옵티마이저
    * SQL 문을 처리하는데 필요한 비용이 가장 적은 실행 계획을 선택하는 방식
    * 소요시간이나 자원 사요량을 가지고 실행 계획 생성
    * 테이블, 인덱스, 컬럼 등의 다양한 객체 통계 정보와 시스템 통계정보 활용

### SQL 성능 튜닝

* 개념
  * SQL 문을 최적화 하여 시스템의 처리량과 응답속도를 개선
* 접근 방법
  * 부하의 감소
  * 부하의 조정
  * 부하의 병렬 수행
* 튜닝 영역
  * 데이터 베이스 설계 튜닝
  * 데이터베이스 환경
  * SQL 문장 튜닝
* 성능 최적화를 위한 유틸리티 
  * SQL Trace
  * TKPROF(Trace Kernel PROFile)
  * EXPLAIN PLAN
* Row Migration / Row Chaining
  * Row Migration
    * 데이터가 수정되어 데이터가 커져서 기존블록에 못들어가는 경우
    * 다른 블록에 데이터를 넣고 기존 블록에는 위치 링크 남김
  * Row Chaining
    * 컬럼이 너무 길어서 DB BLOCK 사이즈 보다 길어진 경우 블록 두개에 이어서 한 ROW 가 저장

-----------------------------------------------

## 분산 데이터베이스

### 분산 데이터 베이스

* 정의
  * 여러곳에 분산된 데이터 베이스를 하나의 논리적인 시스템처럼 사용할수 있는 데이터베이스
* 구성요소
  * 분산 처리기
  * 분산 데이터 베이스
  * 통신 네트워크
* 장점
  * 지역 자치성
  * 신뢰성
  * 가용성
  * 효용성
* 단점
  * 소프트웨어 개발 비용증가
  * 오류 잠재성 증대
  * 처리 비용 증대
* 분산 데이터베이스 적용기법
  * 테이블 위치 분산
    * 설계된 테이블 위치를 각각 다르게 위치
  * 테이블 분할 분산
    * 각각의 테이블을 쪼개어 분산
      * 수평분할
      * 수직분할
  * 테이블 복제 분산
    * 부분복제
    * 광역복제
  * 테이블 요약 분산
    * 분석요약
    * 통합요약
* 투명성 조건
  * 위치 투명성
    * 실제 위치를 모르고 논리적 명칭만으로 엑세스 가능
  * 분할 투명성
    * 여러 단편으로 분할된 논리적 테이블 관리
  * 지역 사상 투명성
    * 지역 DBMS 와 물리적 DB 사이의 Mapping 보장
    * 각 지역 시스템 이름과 무간한 이름 사용 가능
  * 중복 투명성
    * 동일 데이터의 중복을 사용자에게 숨김
  * 병행 투명성
    * 다수의 트랜잭션들이 동시에 실행되더라도 서로 영향을 주지 않음
  * 장애 투명성
    * 다양한 장애에도 트랜잭션 정학처리
* CAP 이론
  * 어떤 분산 한경에서도 일관성, 가용성, 분단허용성 세가지중 두가지만 가질수 있다는것
  * 세가지 모두 만족할수 없음
  * 특징의 의미
    * 일관성
      * 시스템의 모든 노드가 어떤 특정 시점에서 동일한 데이터를 보유하고 있어야함
    * 가용성
      * 모든 요청에 대해 시스템이 항상 응답을 해야한다
    * 분단 허용성
      * 네트워크 분할이 발생하더라도 시스템 전체의 작동이 중단 되지 않아야함

### 트랜잭션

* 개념
  * 데이터베이스의 상태를 변환시키는 하나의 논리적 기능을 수행하는 작업 단위
* 성질(ACID)
  * 원자성(Atomicity)
    * 트랜잭션 내의 모든 연산은 모두 반영되거나 아니면 전혀 반영되지 않아야 한다.
  * 일관성(Consistency)
    * 트랜잭션이 성공적으로 완료되면 데이터베이스는 일관된 상태로 유지되어야 한다.
  * 독립성, 격리성(Isolation)
    * 동시에 실행되는 여러 트랜잭션들은 서로 간섭할수 없으며 각각 독립적으로 실행
  * 영속성(Durability)
    * 성공적으로 완료된 트랜잭션의 결과는 영구적으로 반영되어야 한다.
* 상태
  * 실행시작 -> 활동 -> 부분완료 -> 완료 or (실패 -> 철회)
  * 활동
    * 트랜잭션이 실행중
  * 실패
    * 트랜잭션이 실행중 오류 발생
  * 철회
    * 트랜잭션 실행전 상태로 복구
  * 부분완료
    * 트랜잭션 마지막 연산까지 실행했지만 Commit 을 기다리는 상태
  * 완료
    * 트랜잭션이 성공적으로 종료 Commit 연산을 실행한 상태

-----------------------------------------------

## 기본 SQL 작성

### SQL(Strucured Query Language)

* 개념
  * 데이터베이스 시스템에서 데이터를 처리하기 위해 사용되는 구조적 데이터 질의 언어
* 특징
  * 구문이 영어 문장과 유사
  * 절차적이지 않고 집합 단위
* 종류
  * Data Definition Language(DDL)
    * 데이터베이스의 구조를 정의하는데 사용
    * CREATE, ALTER, DROP, TRUNCATE
  * Data Manipulation Language(DML)
    * 데이터베이스의 데이터를 관리하는데 사용
    * SELECT, INSERT, UPDATE, DELETE
  * Data Control Language(DCL)
    * 데이터베이스를 접근하는 명령어를 주고 뺏는데 사용
    * GRANT, REVOKE
  * Transaction Control Language(TCL)
    * 트랜잭션을 제어하는데 사용
    * COMMIT, ROLLBACK, SAVEPOINT

### DDL(Data Definition Language)

* 개념
  * 데이터가 저장되는 테이블이나 다양한 객체들을 정의하는데 사용되는 언어
* 객체 유형
  * 스키마
  * 도메인
  * 테이블
  * 뷰
  * 인덱스
* 제약조건 적용
  * PRIMARY KEY
    * 하나의 테이브렝서 유일하게 데이터를 식별할수 있는 기본키
    * Not Null + Unique
  * FOREIGN KEY
    * 다른 테이블의 기본키를 참조하는 외래키
    * 참조 무결성 위배 상황 발생시 처리 방법으로 옵션 지정 가능
  * Unique
    * 테이블의 컬럼에 중복된 값을 허용하지 않음
  * NOT NULL
    * 컬럼에 NULL 값을 허용하지 않음
  * CHECK
    * 개발자가 정의하는 특정 조건을 만족해야 하는 컬럼에 대한 제약

### DML(Data Manipulation Language)

* 개념
  * 데이터베이스에서 데이터 조회, 추가, 삭제, 수정을 위한 언어
* INSERT
  * 테이블에 데이터를 추가하는 명령어
  * 숫자에는 홑따옴표 붙이지 않고 문자에는 붙여줌
* SELECT
  * 하나이상의 테이블에 데이터를 조회
  * 키워드
    * WHERE : 조건에 맞는 데이터 지정
    * GROUP BY : 그룹별로 데이터를 묶어서 조회
    * HAVING : GROUP BY 절에 정의된 조건
    * ORDER BY : 정렬
    * 논리 연산자 : NOT, AND, OR
* UPDATE
  * 테이블의 기존 데이터를 갱신하는 명령어
* DELETE
  * 테이블에서 데이터를 삭제하는 명령어

### DCL(Data Control Language)

* 개념
  * 데이터베이스에 접근하거나 객체에 대한 권한을 주고 뺏앗는 역활을 하는 언어
  * 사용자에게 권한을 생성하거나 삭제하는 등의 작업 수행
* GRANT
  * 사용자에게 특정 데이터베이스 객체에 대한 권한을 부여
  * `GRANT [권한] ON [객체] TO [사용자] [WITH GRANT OPTION]`
  * WITH GRANT OPTION : 부여받은 권한을 다른 사용자에게 부여할수 있는 권한을 부여
* REVOKE
  * 사용자에게 부여된 권한을 회수
  * `REVOKE [권한] ON [객체] FROM [사용자] [CASECADE]`
  * CASCADE : 부여받은 권한을 다른 사용자에게 부여한 경우 같이 회수

### TCL(Transaction Control Language)

* 개념
  * 트랜잭션을 제어하는데 사용되는 명령어
  * 데이터베이스에서 작업 단위를 안전하게 관리하기 위해 사용
* 종류
  * COMMIT
    * 트랜잭션의 작업을 영구적으로 반영
    * 한번 수행하면 이전 상태로 돌아갈수 없음
  * ROLLBACK
    * 트랜잭션 처리중 오류 발생시 변경사항을 되돌리고 데이터를 이전 상태로 복구
    * ROLLBACK 후 관련된 행의 잠금이 해제되어 다른 사용자들이 해당 행을 조작할수 있음
  * SAVEPOINT
    * 트랜잭션 중 특점 지점에 대해 저장점 생성
    * 오류가 발생했을때 전체 트랜잭션이 아닌 해당 SAVEPOINT 까지만 ROLLBACK 가능

-----------------------------------------------

## SELECT 쿼리 활용

### 집합 연산자

* 개념
  * 여러 SQL 쿼리를 결합
  * 조인을 사용하지 않고 연관된 테이블 조회
  * SELECT 절의 컬럼수가 동일해야 하며 같은 위치에 있는 컬럼들은 데이터 타입이 호환가능해야함
* 종류
  * UNION
  * UNION ALL
  * INTERSECT
  * EXCEPT(MINUS)

### 조인

* 개념
  * 두개 이상의 테이블을 결합하여 데이터를 검색
  * 관련있는 컬럼 기준으로 행 합쳐줌
  * PK 나 FK 를 이용하여 테이블 연결
* 종류
  * 내부 조인(INNER JOIN)
    * 두테이블에 공통으로 존재하는 데이터 추출
  * 자연 조인(NATURAL JOIN)
    * 동일한 이름과 타입을 가진 컬럼 기준으로 자동 조인
    * 두 테이블간 동일한 이름, 타입을 가진 컬럼 필요
    * 조인에 이용도는 컬럼은 명시하지 않아도 자동으로 조인에 사용
  * 전체 외부 조인(FULL OUTER JOIN)
    * 두 테이블의 모든 데이터를 포함하고 중복된 데이터는 하나로 표시 데이터 없으면 NULL
  * 왼쪽 외부 조인(LEFT OUTER JOIN)
    * 왼쪽 테이블 기준으로 조인하고 우측 데이터가 없으면 NULL
  * 오른쪽 외부 조인(RIGHT OUTER JOIN)
    * 오른쪽 테이블 기준으로 조인하고 좌측 데이터가 없으면 NULL
  * 곱집합(CROSS JOIN)
    * 두 테이블의 모든 행을 조합하여 결과를 반환

### 서브쿼리

* 개념
  * SELECT 문 안에 또 다른 SELECT 문이 포함된 형태 쿼리
* 종류
  * 스칼라 서브쿼기(Scalar SubQuery)
    * SELECT 절에 위치하며 단일 행 또는 단일 값이 반환 
  * 인라인뷰 서브쿼리(Inline View SubQuery)
    * FROM 절에 위치하며 서브쿼리 결과는 하나의 테이블로 반환
  * 중첨 서브쿼리(Nested SubQuery)
    * WHERE 절에 위치하며 단일행 또는 다중행 서브쿼리 연산자를 사용할수 있다
    * 단일행 서브쿼리 연산자 : =, >, <, >=, <=, <>
    * 다중행 서브쿼리 연산자 : IN, ANY, ALL, EXISTS
      * IN : 서브쿼리 결과값을 포함하고 있으면 출력
      * EXISTS : 서브쿼리 결과값이 존재하면 출력
      * ANY : 서브쿼리 결과값중 하나라도 만족하면 출력
      * ALL : 서브쿼리 결과값이 모두 만족하면 출력

-----------------------------------------------

## 그룹함수, 윈도우 함수

### 